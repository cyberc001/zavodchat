Чтобы присоединиться к сокету, нужно после адреса сервера указать его порт, а также указать токен пользователя в квери.

Пример на wscat:
```bash
wscat -nc 'wss://localhost:444?token=17d58d53-014e-4787-80c2-6518924d8d92'
```

Чтобы присоединиться к голосовому сокету, также нужно указать ID канала.

Пример на wscat:
```bash
wscat -nc 'wss://localhost:445?token=17d58d53-014e-4787-80c2-6518924d8d92&channel=2'
```

Все события сокетов имеют следующую форму:
```js
{
	"data":
	{
		// объект с данными...
	},
	"name": "название события"
}
```

# Главный сокет
Порт 444 по умолчанию. Присылает пользователям, состоящим в определённых серверах и каналах, события об изменениях в этих серверах и каналах.

## Сообщения

### message_created

В канале, к которому имеет доступ пользователь, было создано новое сообщение.

Пример:

```js
{
	"data":
	{
		"author_id": 1,
		"channel_id": 1,
		"edited": "2024-12-04 18:36:14.045681+00",
		"id": 6,
		"sent": "2024-12-04 18:36:14.045681+00",
		"server_id": 1,
		"text": "its over guys"
	},
	"name": "message_created"
}
```

### message_edited

В канале, к которому имеет доступ пользователь, было отредактировано существующее сообщение.

Пример:

```js
{
	"data":
	{
		"channel_id": 1,
		"edited": "2025-01-11 01:05:03.080518+00",
		"id": 6,
		"server_id": 1,
		"text": "you_are_good_people"
	},
	"name": "message_edited"
}
```

### message_deleted

В канале, к которому имеет доступ пользователь, было удалено существующее сообщение.

Пример:

```js
{
	"data":
	{
		"channel_id": 1,
		"id": 8,
		"server_id": 1
	},
	"name": "message_deleted"
}
```

## Каналы

### channel_created

На сервере, в котором состоит пользователь, был создан канал.

Пример:

```js
{
	"data":
	{
		"id": 7,
		"name": "political_discussion",
		"server_id": 1,
		"type": 0
	},
	"name": "channel_created"
}
```

### channel_edited

На сервере, в котором состоит пользователь, был изменён канал.

Пример:

```js
{
	"data":
	{
		"id": 7,
		"name": "shared_photos",
		"server_id": 1,
		"type": 1
	},
	"name": "channel_edited"
}
```

### channel_deleted

На сервере, в котором состоит пользователь, был удалён канал.

Пример:

```js
{
	"data":
	{
		"id": 7,
		"server_id": 1
	},
	"name": "channel_deleted"
}
```

## Серверы

### server_edited

Сервер, в котором состоит пользователь, был изменён.

```js
{
	"data": 
	{
		"id": 1,
		"name": "speed_cameras_hotspots"
	},
	"name": "server_edited"
}
```

### server_deleted

Сервер, в котором состоит пользователь, был удалён (вызывается сразу перед удалением сервера из базы данных).

Пример:

```js
{
	"data":
	{
		"id": 2
	},
	"name": "server_deleted"
}
```

## Пользователи на сервере

### user_joined

Пользователь присоединился к серверу.

Пример:

```js
{
	"data":
	{
		"id": 2,
		"server_id": 1
	},
	"name": "user_joined"
}
```

### user_left

Пользователь вышел с сервера (кик/бан). Причина удаления пользователя с сервера не разглашается.
Это событие приходит в том числе самому пользователю.

Пример:

```js
{
	"data":
	{
		"id": 1,
		"server_id": 1
	},
	"name": "user_left"
}
```

### user_joined_vc

Пользователь присоединился к голосовому каналу.

Пример:
```js
{
	"data":
	{
		"channel_id": 2,
		"id": 2,
		"server_id": 1
	},
	"name": "user_joined_vc"
}
```

### user_left_vc

Пользователь вышел из голосового канала.

Пример:
```js
{
	"data":
	{
		"channel_id": 2,
		"id": 2,
		"server_id": 1
	},
	"name": "user_left_vc"
}
```

## Пользователь

### got_server_owner

Пользователю передали права владельца сервера.

Пример:

```js
{
	"data":
	{
		"id": 1
	},
	"name": "got_server_owner"
}
```

# Сокет голосовых каналов
Порт 445 по умолчанию. Успешное присоединение к нему означает, что пользователь находится в голосовом канале.